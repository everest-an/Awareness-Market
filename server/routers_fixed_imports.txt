import { COOKIE_NAME } from "@shared/const";
import { getSessionCookieOptions } from "./_core/cookies";
import { systemRouter } from "./_core/systemRouter";
import { publicProcedure, protectedProcedure, router } from "./_core/trpc";
import { subscriptionRouter } from "./subscription-router";
import { z } from "zod";
import {
  getUserFiles,
  createFile,
  getUserDocuments,
  getDocumentById,
  createDocument,
  updateDocument,
  deleteDocument,
  getUserTags,
  createTag,
  addTagToDocument,
  getUserContacts,
  getContactById,
  createContact,
  updateContact,
  getOrCreateCompany,
  updateCompanyInfo,
  updateFileR2Key,
  getFileStatus,
} from "./db";
import {
  checkSubscriptionStatus,
  requireActiveSubscription,
  getStorageQuota,
  canUseIPFS,
} from "./subscription-middleware";
import {
  performOCRFromFile,
  generateDocument as aiGenerateDocument,
  enrichCompanyInfo,
  extractKeywords,
  checkAIServiceHealth,
} from "./ai-client";
import { storagePut } from "./storage";
